<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="2,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [ <span class="var type1" id="S2T5U3">Id</span>, <span class="var type1" id="S3T3U4">Kd</span> ] = downscaleImage( <span class="var type1" id="S4T5U7">I</span>, <span class="var type1" id="S5T3U8">K</span>, <span class="var type1" id="S6T4U9">num</span> )</span></span>
<span class="srcline"><span class="lineno"><a href="2,2" id="srcline2"> 2</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="2,3" id="srcline3"> 3</a></span><span class="line">    <span class="keyword">if</span>(<span class="var type1" id="S6T4U14">num</span>&lt;=1)</span></span>
<span class="srcline"><span class="lineno"><a href="2,4" id="srcline4"> 4</a></span><span class="line">        <span class="var type0" id="S2T0U18">Id</span> = <span class="var type1" id="S4T5U19">I</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="2,5" id="srcline5"> 5</a></span><span class="line">        <span class="var type0" id="S3T0U22">Kd</span> = <span class="var type1" id="S5T3U23">K</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="2,6" id="srcline6"> 6</a></span><span class="line">        <span class="keyword">return</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="2,7" id="srcline7"> 7</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="2,8" id="srcline8"> 8</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="2,9" id="srcline9"> 9</a></span><span class="line">    <span class="comment">% this is because we interpolate in such a way, that </span></span></span>
<span class="srcline"><span class="lineno"><a href="2,10" id="srcline10">10</a></span><span class="line">    <span class="comment">% the image is discretized at the exact pixel-values (e.g. 3,7), and</span></span></span>
<span class="srcline"><span class="lineno"><a href="2,11" id="srcline11">11</a></span><span class="line">    <span class="comment">% not at the center of each pixel (e.g. 3.5, 7.5).</span></span></span>
<span class="srcline"><span class="lineno"><a href="2,12" id="srcline12">12</a></span><span class="line">    <span class="var type1" id="S3T3U27">Kd</span> = [<span class="var type1" id="S5T3U32">K</span>(1,1)/2 0 (<span class="var type1" id="S5T3U42">K</span>(1,3)+0.5)/2-0.5;</span></span>
<span class="srcline"><span class="lineno"><a href="2,13" id="srcline13">13</a></span><span class="line">          0 <span class="var type1" id="S5T3U52">K</span>(2,2)/2 (<span class="var type1" id="S5T3U61">K</span>(2,3)+0.5)/2-0.5;</span></span>
<span class="srcline"><span class="lineno"><a href="2,14" id="srcline14">14</a></span><span class="line">          0 0 1];</span></span>
<span class="srcline"><span class="lineno"><a href="2,15" id="srcline15">15</a></span><span class="line">      </span></span>
<span class="srcline"><span class="lineno"><a href="2,16" id="srcline16">16</a></span><span class="line"><span class="comment">% 	Id = imresize(I, 0.5);</span></span></span>
<span class="srcline"><span class="lineno"><a href="2,17" id="srcline17">17</a></span><span class="line">    <span class="var type1" id="S2T13U73">Id</span> = (<span class="var type1" id="S4T5U80">I</span>(0+(1:2:end), 0+(1:2:end)) + <span class="var type1" id="S4T5U100">I</span>(1+(1:2:end), 0+(1:2:end)) + <span class="var type1" id="S4T5U120">I</span>(0+(1:2:end), 1+(1:2:end)) + <span class="var type1" id="S4T5U140">I</span>(1+(1:2:end), 1+(1:2:end)))*0.25;</span></span>
<span class="srcline"><span class="lineno"><a href="2,18" id="srcline18">18</a></span><span class="line">      </span></span>
<span class="srcline"><span class="lineno"><a href="2,19" id="srcline19">19</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="2,20" id="srcline20">20</a></span><span class="line">    <span class="message fatal" id="M3F20C">[<span class="var type0" id="S2T0U163">Id</span>, <span class="var type0" id="S3T0U164">Kd</span>] = <span class="fcn" id="F26N3:B166">downscaleImage</span>( <span class="var type1" id="S2T13U167">Id</span>, <span class="var type1" id="S3T3U168">Kd</span>, <span class="var type1" id="S6T4U170">num</span> -1 )</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="2,21" id="srcline21">21</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="2,22" id="srcline22">22</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="2,23" id="srcline23">23</a></span><span class="line"></span></span>
</pre>
